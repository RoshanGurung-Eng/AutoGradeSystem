<!-- autograder/templates/autograder/add_question.html -->
<!doctype html>
<html>
  <head>
    <title>Add Question</title>
    <style>
      body {
        font-family: Arial;
        max-width: 800px;
        margin: 30px auto;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .upload-zone {
        border: 2px dashed #2196f3;
        padding: 30px;
        text-align: center;
        margin: 20px 0;
        cursor: pointer;
      }
      .form-group {
        margin: 15px 0;
      }
      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
      }
      textarea {
        min-height: 100px;
      }
      button {
        background: #4caf50;
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }
      button:hover {
        background: #45a049;
      }
      .ocr-preview {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 5px;
        margin: 15px 0;
      }
      .success {
        background: #e8f5e9;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        color: #4caf50;
      }
      .error {
        background: #ffebee;
        padding: 10px;
        border-radius: 5px;
        margin: 10px 0;
        color: #f44336;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üìö Add Question</h1>

      {% if messages %} {% for message in messages %}
      <div
        class="{% if 'success' in message.tags %}success{% else %}error{% endif %}"
      >
        {{ message }}
      </div>
      {% endfor %} {% endif %} {% if extracted_data %}
      <div class="ocr-preview">
        <strong>üîç OCR Extracted:</strong>
        <p
          style="
            font-family: monospace;
            background: white;
            padding: 10px;
            border-radius: 4px;
          "
        >
          {{ extracted_data.extracted_raw }}
        </p>
      </div>

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <input
          type="hidden"
          name="question_number"
          value="{{ extracted_data.question_number }}"
        />

        <div class="form-group">
          <label>Question Number:</label>
          <select name="question_number">
            <option
              value="Q1"
              {%
              if
              extracted_data.question_number=""
              ="Q1"
              %}selected{%
              endif
              %}
            >
              Q1
            </option>
            <option
              value="Q2"
              {%
              if
              extracted_data.question_number=""
              ="Q2"
              %}selected{%
              endif
              %}
            >
              Q2
            </option>
            <option
              value="Q3"
              {%
              if
              extracted_data.question_number=""
              ="Q3"
              %}selected{%
              endif
              %}
            >
              Q3
            </option>
            <option
              value="Q4"
              {%
              if
              extracted_data.question_number=""
              ="Q4"
              %}selected{%
              endif
              %}
            >
              Q4
            </option>
            <option
              value="Q5"
              {%
              if
              extracted_data.question_number=""
              ="Q5"
              %}selected{%
              endif
              %}
            >
              Q5
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Question Text:</label>
          <textarea name="question_text" required>
{{ extracted_data.question_text }}</textarea
          >
        </div>

        <div class="form-group">
          <label>Upload Question Image:</label>
          <input type="file" name="question_image_permanent" accept="image/*" />
        </div>

        <div class="form-group">
          <label>Model Answer:</label>
          <textarea
            name="model_answer"
            placeholder="Enter ideal answer"
            required
          ></textarea>
        </div>

        <div class="form-group">
          <label>Keywords (comma-separated):</label>
          <input
            type="text"
            name="keywords"
            placeholder="uml, class, sequence, diagram"
            required
          />
        </div>

        <button type="submit">‚úÖ Save Question</button>
      </form>

      {% else %}
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div
          class="upload-zone"
          onclick="document.getElementById('imageInput').click()"
        >
          <p>üì∑ Click to upload question image</p>
          <input
            type="file"
            id="imageInput"
            name="question_image"
            accept="image/*"
            style="display: none"
            required
          />
        </div>
        <button type="submit">üîç Extract with OCR</button>
      </form>
      {% endif %}

      <div style="margin-top: 30px">
        <a href="{% url 'view_questions' %}" style="color: #2196f3"
          >‚Üê View All Questions</a
        >
      </div>
    </div>
  </body>
</html>
